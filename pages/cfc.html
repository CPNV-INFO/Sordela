<?php if (isset($message)) { ?>
<div id="alert"><?= $message ?></div>
<?php } ?>


<table class="bulletin" style="border:none;">
    <tbody>
    <tr style="border:none;">
        <td style="border:none; width:100px"><img alt="logo" src="images/logo.png" style="width:60px"></td>
        <td style="border:none">
            <h3>Bulletin de notes de <?= $nickname ?></h3>
        </td>
        <td style="width: 400px; text-align: right"><a href="/">
            <button>Ok</button>
        </a></td>
    </tr>
    </tbody>
</table>
<table class="table-bordered bulletin" style="-webkit-print-color-adjust:exact;">
    <tbody>
    <tr>
        <td rowspan="2" width="60">CFC Informaticien d'entreprise</td>
        <td class="td-header" colspan="4">Année scolaire <br> 2018 - 2019</td>
        <td class="td-header" rowspan="2" width="2" style="font-size:16px; background-color: lightgrey;">1</td>
        <td class="td-header" colspan="4">Année scolaire <br> 2019 - 2020</td>
        <td class="td-header" rowspan="2" width="2" style="font-size:16px; background-color: lightgrey;">2</td>
        <td class="td-header" colspan="4">Année scolaire <br> 2020 - 2021</td>
        <td class="td-header" rowspan="2" width="2" style="font-size:16px; background-color: lightgrey;">3</td>
        <td class="td-header" colspan="4">Année scolaire <br> 2021 - 2022</td>
        <td class="td-header" rowspan="2" width="2" style="font-size:16px; background-color: lightgrey;">4</td>
        <td rowspan="2" class="whitecell noborder" style="font-size:12px">Final</td>
    </tr>
    <tr>
        <td class="td-header" width="68" colspan="2">Semestre 1</td>
        <td class="td-header" width="68" colspan="2">Semestre 2</td>
        <td class="td-header" width="68" colspan="2">Semestre 3</td>
        <td class="td-header" width="68" colspan="2">Semestre 4</td>
        <td class="td-header" width="68" colspan="2">Semestre 5</td>
        <td class="td-header" width="68" colspan="2">Semestre 6</td>
        <td class="td-header" width="68" colspan="2">Semestre 7</td>
        <td class="td-header" width="68" colspan="2">Semestre 8</td>
    </tr>
    <tr>
        <td colspan="22" width="100%" class="orange">Groupe - Compétences en informatique - 30%</td>
    </tr>
    <tr>
        <td width="60" class="title">ICT</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td rowspan="2" style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td class="challenge" data-challengeid="2" data-questionid="<?= $chals[2]['qid'] ?>" data-question="<?= $chals[2]['question'] ?>" data-grade="<?= $chals[2]['grade'] ?>"><?= $chals[2]['text'] ?></td>
        <td class="challenge" data-challengeid="10" data-questionid="<?= $chals[10]['qid'] ?>" data-question="<?= $chals[10]['question'] ?>" data-grade="<?= $chals[10]['grade'] ?>"><?= $chals[10]['text'] ?></td>
        <td></td>
        <td class="challenge" data-challengeid="12" data-questionid="<?= $chals[12]['qid'] ?>" data-question="<?= $chals[12]['question'] ?>" data-grade="<?= $chals[12]['grade'] ?>"><?= $chals[12]['text'] ?></td>
        <td rowspan="2" style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td></td>
        <td></td>
        <td colspan="2" rowspan="2">&nbsp;</td>
        <td rowspan="2" style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td colspan="2" rowspan="2">&nbsp;</td>
        <td></td>
        <td></td>
        <td rowspan="2" style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td id="finalAverage" rowspan="2" style="background-color: <?= $average > 4 ? 'green' : 'red' ?>"><?= $average ?></td>
    </tr>
    <tr>
        <td width="60" class="title">CIE</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td colspan="22" width="100%" class="orange">Groupe - Pratique Professionnelle - 30%</td>
    </tr>
    <tr>
        <td width="60" class="title" rowspan="2">Modules CPNV</td>
        <td class="challenge" data-challengeid="15" data-questionid="<?= $chals[15]['qid'] ?>" data-question="<?= $chals[15]['question'] ?>" data-grade="<?= $chals[15]['grade'] ?>"><?= $chals[15]['text'] ?></td>
        <td class="challenge" data-challengeid="13" data-questionid="<?= $chals[13]['qid'] ?>" data-question="<?= $chals[13]['question'] ?>" data-grade="<?= $chals[13]['grade'] ?>"><?= $chals[13]['text'] ?></td>
        <td class="challenge" data-challengeid="19" data-questionid="<?= $chals[19]['qid'] ?>" data-question="<?= $chals[19]['question'] ?>" data-grade="<?= $chals[19]['grade'] ?>"><?= $chals[19]['text'] ?></td>
        <td class="challenge" data-challengeid="14" data-questionid="<?= $chals[14]['qid'] ?>" data-question="<?= $chals[14]['question'] ?>" data-grade="<?= $chals[14]['grade'] ?>"><?= $chals[14]['text'] ?></td>
        <td style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td></td>
        <td></td>
        <td class="challenge" data-challengeid="18" data-questionid="<?= $chals[18]['qid'] ?>" data-question="<?= $chals[18]['question'] ?>" data-grade="<?= $chals[18]['grade'] ?>"><?= $chals[18]['text'] ?></td>
        <td></td>
        <td style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td class="challenge" data-challengeid="22" data-questionid="<?= $chals[22]['qid'] ?>" data-question="<?= $chals[22]['question'] ?>" data-grade="<?= $chals[22]['grade'] ?>"><?= $chals[22]['text'] ?></td>
        <td class="challenge" data-challengeid="23" data-questionid="<?= $chals[23]['qid'] ?>" data-question="<?= $chals[23]['question'] ?>" data-grade="<?= $chals[23]['grade'] ?>"><?= $chals[23]['text'] ?></td>
        <td colspan="2" rowspan="2" class="challenge" data-challengeid="25" data-questionid="<?= $chals[25]['qid'] ?>" data-question="<?= $chals[25]['question'] ?>" data-grade="<?= $chals[25]['grade'] ?>"><?= $chals[25]['text'] ?></td>
        <td style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td colspan="2" rowspan="2">&nbsp;</td>
        <td></td>
        <td></td>
        <td style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td rowspan="2" class="challenge" data-challengeid="26" data-questionid="<?= $chals[26]['qid'] ?>" data-question="<?= $chals[26]['question'] ?>" data-grade="<?= $chals[26]['grade'] ?>"><?= $chals[26]['text'] ?></td>
    </tr>
    <tr>
        <td class="challenge" data-challengeid="17" data-questionid="<?= $chals[17]['qid'] ?>" data-question="<?= $chals[17]['question'] ?>" data-grade="<?= $chals[17]['grade'] ?>"><?= $chals[17]['text'] ?></td>
        <td class="challenge" data-challengeid="20" data-questionid="<?= $chals[20]['qid'] ?>" data-question="<?= $chals[20]['question'] ?>" data-grade="<?= $chals[20]['grade'] ?>"><?= $chals[20]['text'] ?></td>
        <td class="challenge" data-challengeid="4" data-questionid="<?= $chals[4]['qid'] ?>" data-question="<?= $chals[4]['question'] ?>" data-grade="<?= $chals[4]['grade'] ?>"><?= $chals[4]['text'] ?></td>
        <td></td>
        <td style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td class="challenge" data-challengeid="21" data-questionid="<?= $chals[21]['qid'] ?>" data-question="<?= $chals[21]['question'] ?>" data-grade="<?= $chals[21]['grade'] ?>"><?= $chals[21]['text'] ?></td>
        <td class="challenge" data-challengeid="11" data-questionid="<?= $chals[11]['qid'] ?>" data-question="<?= $chals[11]['question'] ?>" data-grade="<?= $chals[11]['grade'] ?>"><?= $chals[11]['text'] ?></td>
        <td style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td></td>
        <td></td>
        <td style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
    </tr>
    <tr>
        <td colspan="22" width="100%" class="orange">Groupe - Culture générale - 20%</td>
    </tr>
    <tr>
        <td width="60" class="title">Société</td>
        <td class="challenge" data-challengeid="3" data-questionid="<?= $chals[3]['qid'] ?>" data-question="<?= $chals[3]['question'] ?>" data-grade="<?= $chals[3]['grade'] ?>"><?= $chals[3]['text'] ?></td>
        <td></td>
        <td></td>
        <td></td>
        <td rowspan="2" style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td rowspan="2" style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td></td>
        <td></td>
        <td colspan="2" rowspan="2">&nbsp;</td>
        <td rowspan="2" style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td colspan="2" rowspan="2">&nbsp;</td>
        <td colspan="2" rowspan="2">TPA: <br>Examen:</td>
        <td rowspan="2" style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td rowspan="2"></td>
    </tr>
    <tr>
        <td width="60" class="title">Langue et Communication</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td colspan="22" width="100%" class="orange">Groupe - Compétences de base élargies - 20%</td>
    </tr>
    <tr>
        <td width="60" class="title">Anglais</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td rowspan="4" style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td></td>
        <td class="challenge" data-challengeid="6" data-questionid="<?= $chals[6]['qid'] ?>" data-question="<?= $chals[6]['question'] ?>" data-grade="<?= $chals[6]['grade'] ?>"><?= $chals[6]['text'] ?></td>
        <td></td>
        <td></td>
        <td rowspan="4" style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td></td>
        <td></td>
        <td colspan="2" rowspan="4">&nbsp;</td>
        <td rowspan="4" style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td colspan="2" rowspan="4">&nbsp;</td>
        <td></td>
        <td></td>
        <td rowspan="4" style="background-color:lightgrey; text-align: center; vertical-align: middle;"></td>
        <td rowspan="4"></td>
    </tr>
    <tr>
        <td width="60" class="title">Mathématiques</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td width="60" class="title">Economie d'entreprise</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td width="60" class="title">Sciences Naturelles</td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
    </tr>
    <tr>
        <td colspan="22" width="100%" class="orange">Note Globale</td>
    </tr>
    <tr>
        <td width="60" class="title">&nbsp;</td>
        <td colspan="2"></td>
        <td colspan="2"></td>
        <td></td>
        <td colspan="2"></td>
        <td colspan="2"></td>
        <td></td>
        <td colspan="2"></td>
        <td colspan="2"></td>
        <td></td>
        <td colspan="2"></td>
        <td colspan="2"></td>
        <td></td>
        <td></td>
    </tr>
    </tbody>
</table>

<!-- Modal -->
<div class="modal fade" id="ModalChallenge" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="challengeText">sss</h5>
            </div>
            <div class="modal-body">
                <form method="post">
                    <input name="challengeResponse" id="challengeResponse" type="text">
                    <input type="hidden" name="questionid" id="questionid">
                    <input type="hidden" name="challengeid" id="challengeid">
                    <input type="hidden" name="pin" id="pin" value="<?= $pin ?>">
                    <button type="submit" class="btn btn-primary" name="challengeSubmit" id="challengeSubmit">Ok</button>
                </form>
            </div>
        </div>
    </div>
</div>
